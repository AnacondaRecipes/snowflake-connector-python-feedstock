From eeb567e8d9f8494f3cde06db76c0e5bb05756636 Mon Sep 17 00:00:00 2001
From: "Uwe L. Korn" <uwe.korn@quantco.com>
Date: Mon, 14 Dec 2020 16:21:38 +0100
Subject: [PATCH 2/2] Only define CResult once

---
 src/snowflake/connector/arrow_iterator.pyx | 9 ++-------
 1 file changed, 2 insertions(+), 7 deletions(-)

diff --git a/src/snowflake/connector/arrow_iterator.pyx b/src/snowflake/connector/arrow_iterator.pyx
index 03e957b..55f05cf 100644
--- a/src/snowflake/connector/arrow_iterator.pyx
+++ b/src/snowflake/connector/arrow_iterator.pyx
@@ -72,6 +72,7 @@ cdef extern from "arrow/api.h" namespace "arrow" nogil:
     cdef cppclass CResult "arrow::Result"[T]:
         CResult()
         CResult(CStatus status)
+        CResult(T)
 
         c_string ToString()
         c_string message()
@@ -79,6 +80,7 @@ cdef extern from "arrow/api.h" namespace "arrow" nogil:
         c_bool ok()
         const CStatus& status()
         T& ValueOrDie()
+        T operator*()
 
     cdef cppclass CBuffer" arrow::Buffer":
         CBuffer(const uint8_t* data, int64_t size)
@@ -88,13 +90,6 @@ cdef extern from "arrow/api.h" namespace "arrow" nogil:
     cdef cppclass CRecordBatchReader" arrow::RecordBatchReader":
         CStatus ReadNext(shared_ptr[CRecordBatch]* batch)
 
-    cdef cppclass CResult "arrow::Result"[T]:
-        CResult()
-        CResult(CStatus)
-        CResult(T)
-        c_bool ok()
-        CStatus status()
-        T operator*()
 
 cdef extern from "arrow/ipc/api.h" namespace "arrow::ipc" nogil:
     cdef cppclass CRecordBatchStreamReader \
-- 
2.30.0

